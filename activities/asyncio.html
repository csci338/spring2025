<!doctype html>
<html lang="en">
    <head>
            <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/spring2025/assets/images/favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>AsyncIO Activity</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/spring2025/assets/main.css">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163192686-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-163192686-1');
    </script>
    </head>
    <body class="two-column">
        <!-- banner -->
<header>
    <section>
        <h1 class="desktop"><a href="/spring2025/">CSCI 338: Spring 2025</a></h1>
        <h2 class="desktop">Software Engineering</h2>
        <a class="mobile" href="#">
            <i class="menu-toggle fas fa-bars"></i>
        </a>
        <h1 class="mobile">CSCI 338: Spring 2025</h1>
    </section>
    <img src="https://communication.unca.edu/wp-content/themes/tin/assets/logo.svg" />
</header>
        <nav>
    <ul>
        <li ><a href="/spring2025/syllabus/">Syllabus</a>
        </li>
        <li ><a
                href="/spring2025/">Schedule</a></li>
        <li ><a
                href="/spring2025/assignments/">Assignments</a></li>
        <li ><a
                href="/spring2025/resources/">Resources</a></li>
        <li ><a href="/spring2025/repos/">Repos</a>
        </li>
        <li><a href="https://drive.google.com/drive/folders/1F04DqxzsbKMFNIsGkrv_FbglDk5WKRit?usp=sharing"
                target="_blank">Videos</a></li>
    </ul>
</nav>
        <main>
            <aside>
                
                
                <ol class="side-menu">
  <li><a href="#id_objective">Objective</a></li>
  <li><a href="#id_scenario">Scenario</a></li>
  <li><a href="#id_get-situated--pull-down-the-files">Get Situated / Pull Down the Files</a></li>
  <li><a href="#id_synchronous-version-no-asyncio">Synchronous Version (no asyncio)</a></li>
  <li><a href="#id_synchronous-version-with-asyncio">Synchronous Version (with asyncio)</a></li>
  <li><a href="#id_answer-the-following-questions-in-answersmd">Answer the following questions in answers.md</a></li>
</ol>

            </aside>
            <article>
                

    
        <h1>AsyncIO Activity</h1>
    
 
                <h2 id="id_objective">Objective</h2>
<p>Python’s asyncio library enables concurrent execution, which is important when you’re waiting around for things to finish. To explore this idea, let’s simulate a café where multiple customers place orders, and the barista prepares drinks concurrently.</p>

<blockquote class="info">
  <h2 id="id_scenario">Scenario</h2>
  <p>The café has one barista who prepares drinks. Without asyncio, the barista can only handle one order at a time:</p>
  <ul>
    <li>Takes Alice’s order → Makes Alice’s Latte → Hands it to Alice.</li>
    <li>Takes Bob’s order → Makes Bob’s Espresso → Hands it to Bob.</li>
    <li>Takes Charlie’s order → Makes Charlie’s Cappuccino → Hands it to Charlie.</li>
  </ul>

  <p>In other words, they can only start making the next drink after finishing the current one. However, with asyncio, the barista can start preparing drinks as soon as the order is placed.</p>
</blockquote>

<h2 id="id_get-situated--pull-down-the-files">Get Situated / Pull Down the Files</h2>
<p><strong>On GitHub:</strong> sync your fork of the <strong>class-exercises-spring2025</strong> repo on GitHub.</p>

<p><strong>On your local machine:</strong></p>
<ul>
  <li>Navigate to your <code class="highlighter-rouge">csci338/class-exercises-spring2025</code> directory</li>
  <li>Check that everything is committed and pushed to your remote branch (some command reminders below):<br /><br />
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  git branch
  git status
  git add .
  git commit -m "Message describing your changes"
</code></pre></div>    </div>
  </li>
  <li>Checkout <code class="highlighter-rouge">main</code></li>
  <li>Pull down the latest code (<code class="highlighter-rouge">git pull</code>). You should see a new <code class="highlighter-rouge">asyncio-activity</code> folder within your local <code class="highlighter-rouge">class-exercises-spring2025</code> folder.</li>
  <li>Create a new branch from main called <strong>asyncio-activity-b</strong>: <code class="highlighter-rouge">git checkout -b asyncio-activity-b</code></li>
</ul>

<h2 id="id_synchronous-version-no-asyncio">Synchronous Version (no asyncio)</h2>
<p>Within the <code class="highlighter-rouge">asyncio-activity</code> directory you just made, add the following code to the <code class="highlighter-rouge">cafe_sync.py</code> file (I recommend that you do this within VS code, but it’s up to you):</p>

<p>Paste in the following code:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">prepare_drink</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span> <span class="n">drink</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">customer</span><span class="si">}</span><span class="s"> ordered a </span><span class="si">{</span><span class="n">drink</span><span class="si">}</span><span class="s">."</span><span class="p">)</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Simulates time to make the drink
</span>    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">customer</span><span class="si">}</span><span class="s">'s </span><span class="si">{</span><span class="n">drink</span><span class="si">}</span><span class="s"> is ready!"</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">customers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Latte"</span><span class="p">),</span> <span class="p">(</span><span class="s">"Bob"</span><span class="p">,</span> <span class="s">"Espresso"</span><span class="p">),</span> <span class="p">(</span><span class="s">"Charlie"</span><span class="p">,</span> <span class="s">"Cappuccino"</span><span class="p">)]</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s">"Starting orders...</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">customer</span><span class="p">,</span> <span class="n">drink</span> <span class="ow">in</span> <span class="n">customers</span><span class="p">:</span>
        <span class="n">prepare_drink</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span> <span class="n">drink</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">All orders completed!"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></div>

<p>Then run it. Note that each drink takes 2 seconds. Hence, the total time is ~6 seconds (3 drinks × 2 seconds)</p>

<h2 id="id_synchronous-version-with-asyncio">Synchronous Version (with asyncio)</h2>
<p>Now add the following code into <code class="highlighter-rouge">cafe_async.py</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">prepare_drink</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span> <span class="n">drink</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">customer</span><span class="si">}</span><span class="s"> ordered a </span><span class="si">{</span><span class="n">drink</span><span class="si">}</span><span class="s">."</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># Simulates time to make the drink
</span>    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">customer</span><span class="si">}</span><span class="s">'s </span><span class="si">{</span><span class="n">drink</span><span class="si">}</span><span class="s"> is ready!"</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">customers</span> <span class="o">=</span> <span class="p">[(</span><span class="s">"Alice"</span><span class="p">,</span> <span class="s">"Latte"</span><span class="p">),</span> <span class="p">(</span><span class="s">"Bob"</span><span class="p">,</span> <span class="s">"Espresso"</span><span class="p">),</span> <span class="p">(</span><span class="s">"Charlie"</span><span class="p">,</span> <span class="s">"Cappuccino"</span><span class="p">)]</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s">"Starting orders...</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">prepare_drink</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span> <span class="n">drink</span><span class="p">)</span> <span class="k">for</span> <span class="n">customer</span><span class="p">,</span> <span class="n">drink</span> <span class="ow">in</span> <span class="n">customers</span><span class="p">]</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">)</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">All orders completed!"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">asyncio</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div></div>

<p>Run this file, and note:</p>

<ul>
  <li>All drinks are prepared concurrently.</li>
  <li>The total time = ~2 seconds (instead of ~6).</li>
</ul>

<h2 id="id_answer-the-following-questions-in-answersmd">Answer the following questions in answers.md</h2>

<ul>
  <li>What was the key difference between the two versions?</li>
  <li>When would you want to use something like this?</li>
  <li>In the <strong>asynchronous</strong> version of the code, what do the  following commands do (feel free to use GenAI, but articulate the results in your own words)?
    <ul>
      <li><code class="highlighter-rouge">asyncio.run(main())</code></li>
      <li><code class="highlighter-rouge">await asyncio.gather(*tasks)</code></li>
    </ul>
  </li>
</ul>


            </article>  
        </main>
        <footer>
            <p>    
                Department of Computer Science, UNC Asheville
            </p>
        </footer>
        
        <script type="text/javascript" src="/spring2025/assets/js/main.js"></script>

<!-- <script>
    //little bit of a hack:
    const scrollLeft = () => {
        //console.log('scrollLeft');
        document.documentElement.scrollLeft = 0;
    };
    setTimeout(scrollLeft, 100);
</script> -->
        
        <script type="text/javascript" src="/spring2025/assets/js/scrollspy.js"></script>
        <script type="text/javascript" src="/spring2025/assets/js/expandable.js"></script>
    </body>
</html>