<!doctype html>
<html lang="en">
    <head>
            <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/spring2025/assets/images/favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Full Stack Application</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/spring2025/assets/main.css">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163192686-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-163192686-1');
    </script>
    </head>
    <body class="two-column">
        <!-- banner -->
<header>
    <section>
        <h1 class="desktop"><a href="/spring2025/">CSCI 338: Spring 2025</a></h1>
        <h2 class="desktop">Software Engineering</h2>
        <a class="mobile" href="#">
            <i class="menu-toggle fas fa-bars"></i>
        </a>
        <h1 class="mobile">CSCI 338: Spring 2025</h1>
    </section>
    <img src="https://communication.unca.edu/wp-content/themes/tin/assets/logo.svg" />
</header>
        <nav>
    <ul>
        <li ><a href="/spring2025/syllabus/">Syllabus</a>
        </li>
        <li ><a
                href="/spring2025/">Schedule</a></li>
        <li class="active" ><a
                href="/spring2025/assignments/">Assignments</a></li>
        <li ><a
                href="/spring2025/resources/">Resources</a></li>
        <li ><a href="/spring2025/repos/">Repos</a>
        </li>
        <li><a href="https://drive.google.com/drive/folders/1F04DqxzsbKMFNIsGkrv_FbglDk5WKRit?usp=sharing"
                target="_blank">Videos</a></li>
    </ul>
</nav>
        <main>
            <aside>
                
                
                <ol class="side-menu">
  <li><a href="#id_project-2--exam-ground-rules">Project 2 / Exam Ground Rules</a></li>
  <li><a href="#id_installation--set-up">Installation &amp; Set-Up</a>
    <ol>
      <li><a href="#id_pull-down-the-starter-files-from-github">Pull down the starter files from GitHub</a></li>
      <li><a href="#id_build-your-docker-containers-and-nodejs-instance">Build your Docker Containers and Node.js Instance</a></li>
    </ol>
  </li>
  <li><a href="#id_understanding-the-architecture-of-the-system">Understanding the Architecture of the system</a></li>
  <li><a href="#id_your-tasks">Your Tasks</a>
    <ol>
      <li><a href="#id_1-querying-the-database-using-sql-docker-db-container">1. Querying the database using SQL (Docker DB container)</a>
        <ol>
          <li><a href="#id_sql-tasks">SQL Tasks</a></li>
        </ol>
      </li>
      <li><a href="#id_2-querying-with-sqlalchemy--python-docker-server-container">2. Querying with SQLAlchemy &amp; Python (Docker Server container)</a>
        <ol>
          <li><a href="#id_sqlalchemy-tasks">SQLAlchemy Tasks</a></li>
        </ol>
      </li>
      <li><a href="#id_3-building-fast-api-endpoints-docker-server-container">3. Building Fast API Endpoints (Docker Server container)</a>
        <ol>
          <li><a href="#id_31-examining-serverpy">3.1. Examining server.py</a></li>
          <li><a href="#id_32-examining-the-apiinstructors-endpoint">3.2. Examining the /api/instructors/ endpoint</a>
            <ol>
              <li><a href="#id_route-decorator">Route Decorator</a></li>
              <li><a href="#id_function-definition">Function Definition</a></li>
            </ol>
          </li>
          <li><a href="#id_33-examining-the-apicourses-endpoint">3.3. Examining the /api/courses/ endpoint</a></li>
          <li><a href="#id_fast-api-tasks">Fast API Tasks</a></li>
        </ol>
      </li>
      <li><a href="#id_4-building-your-react-client-nodejs--static-files">4. Building your React client (Node.js + static files)</a>
        <ol>
          <li><a href="#id_react-tasks">React Tasks</a></li>
        </ol>
      </li>
      <li><a href="#id_5-final-exam-reflection">5. Final Exam Reflection</a>
        <ol>
          <li><a href="#id_course-reflection-tasks">Course Reflection Tasks</a></li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="#id_what-to-turn-in">What to Turn In</a>
    <ol>
      <li><a href="#id_checklist">Checklist</a></li>
      <li><a href="#id_what-to-turn-in-1">What to Turn In</a></li>
    </ol>
  </li>
</ol>

            </aside>
            <article>
                

    
    <h1>
        <a href="../assignments/">Assignments</a> >
        Project 2: Full Stack Application
    </h1>
    
 
                <p>
    
        Due on Mon, 05/05 @ 11:59PM.
    
    
        20 Points.
    
    
</p>

<style>
    .info .highlight, .info .highlight pre, .info .highlight table {
        background: transparent !important;
        color: #242424 !important;
    }

    .info ol li, .info > ul > li {
        margin-bottom: 20px;
    }

    .info ol, .info > ul {
        margin-top: 20px !important;
    }

    .info code.highlighter-rouge {
        font-weight: bold;
        background: transparent;
    }
</style>

<blockquote class="info">
  <h2 id="id_project-2--exam-ground-rules">Project 2 / Exam Ground Rules</h2>
  <p>For this project / exam, you can use any resource that you want with the exception of talking to your classmates. This assessment is meant to be done individually.</p>
  <ul>
    <li>You may use Google / ChatGPT / other AI tools to help you understand the various libraries, dependencies, and techniques utilized in the project.</li>
    <li>The short-answer questions should be expressed in your own words (versus copied from ChatGPT / the Internet). Think of these as potential interview questions that you should be able to answer.</li>
    <li>You can ask Sarah questions during office hours or via email.
      <ul>
        <li>Open office hours Mo-Th (12/9-12/12) from 2-3PM</li>
        <li>You can also <a href="https://calendar.app.google/iVbktstRnkS5uNTz9" target="_blank">schedule an appointment</a></li>
      </ul>
    </li>
  </ul>
</blockquote>

<p>For Project 2 / the final exam (I’ve combined the two), you will complete a series of coding tasks and answer some questions in a copy of <a href="https://docs.google.com/document/d/1nySPayDV4pUvUcwM9eT465TjSKPSiV9r1KBqmWkEHRs/edit?usp=sharing" target="_blank">this Google Doc</a>. This activity is meant to give you exposure to making a “full stack” system and to integrate everything you’ve learned in this class into a single project.</p>

<h2 id="id_installation--set-up">Installation &amp; Set-Up</h2>
<p>Make a a copy of <a href="https://docs.google.com/document/d/1nySPayDV4pUvUcwM9eT465TjSKPSiV9r1KBqmWkEHRs/edit?usp=sharing" target="_blank">this Google Doc</a> and write you name on it. Then:</p>

<h3 id="id_pull-down-the-starter-files-from-github">Pull down the starter files from GitHub</h3>
<ol>
  <li>
    <p>Get the latest code from <a href="https://github.com/csci338/class-exercises-spring2025" target="_blank">class-exercises-spring2025</a>.</p>

    <ul>
      <li><strong>On GitHub:</strong> Sync the latest changes from the class version of <code class="highlighter-rouge">class-exercises-spring2025</code> to your copy of the repo on GitHub.</li>
      <li><strong>On your local computer:</strong>
        <ul>
          <li>Make sure that all of your changes from the last lab are staged and committed.</li>
          <li>Checkout your main branch: <code class="highlighter-rouge">git checkout main</code></li>
          <li>Pull down the latest changes: <code class="highlighter-rouge">git pull</code>
            <ul>
              <li>If you did it correctly, you will notice that a new <code class="highlighter-rouge">project02</code> folder has been created.</li>
            </ul>
          </li>
          <li>Create a new branch called <strong>project02</strong>: <code class="highlighter-rouge">git checkout -b project02</code></li>
          <li>Verify that you’re on your new branch: <code class="highlighter-rouge">git branch</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h3 id="id_build-your-docker-containers-and-nodejs-instance">Build your Docker Containers and Node.js Instance</h3>
<ol>
  <li>
    <p>After making sure that Docker is running, issue the following command from your command line:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker compose up
</code></pre></div>    </div>

    <p>Be patient – this script can take a while to configure the containers after the images have been built.</p>
  </li>
  <li>
    <p>Verify that your backend container is running by navigating to <a href="http://localhost:8000/docs" target="_blank">http://localhost:8000/docs</a>. If you see an API Endpoint tester, you built your backend successfully.</p>
  </li>
  <li>
    <p>You will run the frontend of your app on <strong>your host computer</strong> (not on Docker). You will configure your front-end as follows:</p>

    <ol>
      <li>Open your entire <code class="highlighter-rouge">project02-spring2025</code> in VS Code</li>
      <li>Navigate to your <code class="highlighter-rouge">ui</code> directory on the terminal</li>
      <li>
        <p>Install the Node dependencies as follows:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> npm install
</code></pre></div>        </div>
      </li>
      <li>
        <p>Run your node server as follows:</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> npm run dev
</code></pre></div>        </div>
      </li>
      <li>Verify that your React service is running by navigating to <a href="http://localhost:5173" target="_blank">http://localhost:5173</a>. If you see a “Schedule Planner” interface, you have configured your frontend successfully.</li>
    </ol>
  </li>
</ol>

<h2 id="id_understanding-the-architecture-of-the-system">Understanding the Architecture of the system</h2>
<p>You have created a system architecture that utilizes functionality from three different servers:</p>
<ol>
  <li>A database server (in Docker), which is accessible on your local computer via port <strong>5433</strong></li>
  <li>A web server for serving dynamic queries (in Docker), which is accessible on your local computer via port <strong>8000</strong>.</li>
  <li>A web server for serving static HTML / CSS / JavaScript files (generated using React), which is accessible on your local computer via port <strong>5173</strong>.</li>
</ol>

<p>Because the Python web server and the React server are using the HTTP protocol, you can access both of these services through your web browser (which understands how to interpret HTTP messages). On the other hand, your database server needs to be accessed using a client that understands PostgreSQL messages (e.g., <code class="highlighter-rouge">psql</code> command line tool, DBeaver, PG Admin 4).</p>

<h2 id="id_your-tasks">Your Tasks</h2>
<p>This project / exam is divided into 5 sections:</p>
<ol>
  <li>Database tasks</li>
  <li>SQLAlchemy / ORM tasks</li>
  <li>FastAPI tasks</li>
  <li>React tasks</li>
  <li>Course synthesis questions (as this project is also your final exam)</li>
</ol>

<p>Please complete all of the tasks for each section (as directed in the blue boxes). Before you submit, please double-check the checklist at the bottom of this page to ensure that you have completed all of the required tasks.</p>

<h3 id="id_1-querying-the-database-using-sql-docker-db-container">1. Querying the database using SQL (Docker DB container)</h3>
<p>You can interact with your database on the command line by typing:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker <span class="nb">exec</span> <span class="nt">-it</span> project02-db-1 bash
</code></pre></div></div>

<p>Then, once you’re on the command line, connect to the database server, connect to the database you want to query, and issue some SQL queries:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>psql -U postgres        # connects to the database
\l                      # lists the databases
\c schedulerdb          # connects to the schedulerdb database
\dt                     # lists all of the tables in the schedulerdb
</code></pre></div></div>

<blockquote class="info">
  <h4 id="id_sql-tasks">SQL Tasks</h4>
  <p>Complete the following SQL exercises and paste your answers into your Google Doc (linked to above):</p>

  <ol>
    <li>Write a query that outputs all rows and columns from the <code class="highlighter-rouge">users</code> table.</li>
    <li>Write a query that outputs the <code class="highlighter-rouge">crn</code> and <code class="highlighter-rouge">title</code> of the courses in the <code class="highlighter-rouge">courses</code> table that are in the <code class="highlighter-rouge">CSCI</code> department.</li>
    <li>
      <p>Write a query that outputs a <strong><em>distinct</em></strong> list of all of the department codes in the <code class="highlighter-rouge">courses</code> table ordered alphabetically. Your output should look something like this:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> department 
 ------------
 ACCT
 AFST
 AM
 AMS
 ANTH
 ...
</code></pre></div>      </div>
    </li>
    <li>
      <p>Write a query that outputs the course <code class="highlighter-rouge">crn</code> and <code class="highlighter-rouge">title</code> (from the courses table) and the <code class="highlighter-rouge">username</code> (from the schedule table). You will need to query 4 tables: schedule_courses, schedules users, and courses tables.  Your output should look something like this:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                        title                       |  crn  | username 
 ---------------------------------------------------+-------+----------
 Academic Writing and Critical Inquiry              | 11127 | ablazer1
 Applied Music I: TBA                               | 10194 | ablazer1
 Critical Persp Contemporaneity                     | 10893 | ablazer1
 Special Topics: Advanced Topics in Ceramics: Wheel | 11017 | ablazer1
 Undergrad Research in IST                          | 11040 | ablazer1
 Advanced Creative Writing Workshop: Hybrid forms - | 10648 | aindelic
 Inquiry-Based Science, Physical Activity, and Heal | 10546 | aindelic
 Spanish for Advanced Beginners                     | 11075 | aindelic
 ...
</code></pre></div>      </div>
    </li>
  </ol>
</blockquote>

<h3 id="id_2-querying-with-sqlalchemy--python-docker-server-container">2. Querying with SQLAlchemy &amp; Python (Docker Server container)</h3>
<p>In practice, data APIs rarely issue SQL commands directly. Rather, they use some kind of “object relational mapping” library, or ORM. Project 2 uses a library called SQL Alchemy (which you learned about in Lab 9). Let’s get some additional practice using SQLAlchemy by connecting to our web server container and issuing some SQL Alchemy commands:</p>

<ol>
  <li>
    <p>Connect to your docker container:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker <span class="nb">exec</span> <span class="nt">-it</span> project02-server-1 bash
</code></pre></div>    </div>
  </li>
  <li>
    <p>Activate the poetry shell so that you can work with the ORM models and database using the existing python code that has already been set up for you:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> poetry shell
</code></pre></div>    </div>
  </li>
  <li>
    <p>Open your <code class="highlighter-rouge">project02-spring2025</code> directory in VS Code and navigate to <code class="highlighter-rouge">backend/sample_orm_queries.py</code>. Then, run <code class="highlighter-rouge">sample_orm_queries.py</code> on your poetry shell (from the Docker container) to make sure that everything is working:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> python sample_orm_queries.py
</code></pre></div>    </div>

    <p>If it worked, you should see some courses outputting to the screen.</p>
  </li>
  <li>
    <p>Now that you’ve run <code class="highlighter-rouge">sample_orm_queries.py</code>, let’s take a look at some of the functions in this file, starting with the <code class="highlighter-rouge">show_courses</code> function (shown below):</p>

    <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">Course</span> <span class="k">from</span> <span class="n">models</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">show_courses</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="n">AsyncSessionLocal</span><span class="p">):</span>
     <span class="c1"># create query:
</span>     <span class="n">query</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">Course</span><span class="p">).</span><span class="n">order_by</span><span class="p">(</span><span class="n">Course</span><span class="p">.</span><span class="n">department</span><span class="p">)</span>

     <span class="c1"># execute the query:
</span>     <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

     <span class="c1"># convert the query results to a list:
</span>     <span class="n">courses</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">scalars</span><span class="p">().</span><span class="nb">all</span><span class="p">()</span>

     <span class="c1"># iterate through the list of Course objects and manipulate
</span>     <span class="c1"># as you would any other Python list of objects...
</span>     <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
         <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">crn</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">department</span><span class="si">}</span><span class="s">) - </span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">title</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>The “job” of this function is to query the <code class="highlighter-rouge">courses</code> table and to convert each record into a <code class="highlighter-rouge">Course</code> object (which is much easier to work with in Python that raw SQL results). Please look at this function carefully and make sure you understand it.</p>
  </li>
  <li>
    <p>Now let’s look at how the <code class="highlighter-rouge">Course</code> model is defined in <code class="highlighter-rouge">backend/models.py</code> (around line 40). I’ve pasted it below for your convenience:</p>

    <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">class</span> <span class="nc">Course</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
     <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">"courses"</span>
     <span class="n">crn</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">code</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">department</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">title</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">hours</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">days</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">start_time</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">end_time</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">enrollment_current</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">enrollment_max</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">waitlist_max</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">waitlist_available</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">term_part</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">start_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">end_date</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">DateTime</span><span class="p">(</span><span class="n">timezone</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">instructional_method</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">async_class</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">diversity_intensive</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">diversity_intensive_r</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">distance_learning</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">first_year_seminar</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">graduate</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">honors</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">arts</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="n">service_learning</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
     <span class="nb">open</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Boolean</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

     <span class="c1"># Relationships
</span>     <span class="n">instructors</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
         <span class="s">"Instructor"</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="s">"course_instructors"</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s">"courses"</span>
     <span class="p">)</span>
     <span class="n">schedules</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span>
         <span class="s">"Schedule"</span><span class="p">,</span> <span class="n">secondary</span><span class="o">=</span><span class="s">"schedule_courses"</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s">"courses"</span>
     <span class="p">)</span>

     <span class="n">location_id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">Integer</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s">"locations.id"</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
     <span class="n">location</span> <span class="o">=</span> <span class="n">relationship</span><span class="p">(</span><span class="s">"Location"</span><span class="p">,</span> <span class="n">back_populates</span><span class="o">=</span><span class="s">"courses"</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>The job of this model is to teach python how the <code class="highlighter-rouge">Course</code> object and the <code class="highlighter-rouge">courses</code> database table relate to one another. The first ~25 data fields are just direct mappings to table columns. The “relationship” data fields (<code class="highlighter-rouge">instructors</code>, <code class="highlighter-rouge">schedules</code>, <code class="highlighter-rouge">location</code>), on the other hand, specify how the foreign keys from other database tables connect to other ORM objects in our Project 2 app. Under the hood, SQLAlchemy helps us manage these joins. This is helpful because it allows you to do things like this…</p>

    <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># note that location info is stored in a different table than course info
</span> <span class="k">print</span><span class="p">(</span><span class="n">course</span><span class="p">.</span><span class="n">location</span><span class="p">.</span><span class="n">full_location</span><span class="p">)</span>

 <span class="c1"># note that instrutor info is stored in a different table than course info
</span> <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">course</span><span class="p">.</span><span class="n">instructors</span><span class="p">:</span>
     <span class="k">print</span><span class="p">(</span><span class="n">instructor</span><span class="p">.</span><span class="n">full_name</span><span class="p">)</span>

</code></pre></div>    </div>

    <p>…without having to manually write the code to organize the data from your table joins.</p>
  </li>
  <li>
    <p>Now that you’ve looked at your <code class="highlighter-rouge">Course</code> model, you’re ready to understand how joins work in SQLAlchemy. To get your joins to populate the related models correctly, you must make sure you explicitly query for the data in the related tables as shown below in the  <code class="highlighter-rouge">show_courses_with_table_joins</code> function (which can also be found in the <code class="highlighter-rouge">sample_orm_queries</code> file):</p>

    <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">Course</span> <span class="k">from</span> <span class="n">models</span>
 <span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">selectinload</span>

 <span class="k">async</span> <span class="k">def</span> <span class="nf">show_courses_with_table_joins</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="n">AsyncSessionLocal</span><span class="p">):</span>
     <span class="c1"># query also joins with the instructors and location table
</span>     <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
         <span class="n">select</span><span class="p">(</span><span class="n">Course</span><span class="p">)</span>
         <span class="p">.</span><span class="n">options</span><span class="p">(</span>
             <span class="n">selectinload</span><span class="p">(</span><span class="n">Course</span><span class="p">.</span><span class="n">instructors</span><span class="p">),</span>
             <span class="n">selectinload</span><span class="p">(</span><span class="n">Course</span><span class="p">.</span><span class="n">location</span><span class="p">)</span>
         <span class="p">)</span>
         <span class="p">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Course</span><span class="p">.</span><span class="n">department</span><span class="p">)</span>
     <span class="p">)</span>

     <span class="c1"># execute the query:
</span>     <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

     <span class="c1"># convert the query results to a list:
</span>     <span class="n">courses</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">scalars</span><span class="p">().</span><span class="nb">all</span><span class="p">()</span>

     <span class="c1"># print select information for each course:
</span>     <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>

         <span class="c1"># print stuff from courses tables
</span>         <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">crn</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">department</span><span class="si">}</span><span class="s">) - </span><span class="si">{</span><span class="n">course</span><span class="p">.</span><span class="n">title</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

         <span class="c1"># because we joined on the instructors table, we  have access to its data:
</span>         <span class="n">instructor_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">inst</span><span class="p">.</span><span class="n">full_name</span> <span class="k">for</span> <span class="n">inst</span> <span class="ow">in</span> <span class="n">course</span><span class="p">.</span><span class="n">instructors</span><span class="p">]</span>
         <span class="k">print</span><span class="p">(</span><span class="s">"Intructor(s):"</span><span class="p">,</span> <span class="s">", "</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">instructor_names</span><span class="p">))</span>

         <span class="c1"># because we joined on the locations table, we can output the location:
</span>         <span class="k">if</span> <span class="n">course</span><span class="p">.</span><span class="n">location</span><span class="p">:</span>
             <span class="k">print</span><span class="p">(</span><span class="s">"Location:"</span><span class="p">,</span> <span class="n">course</span><span class="p">.</span><span class="n">location</span><span class="p">.</span><span class="n">full_location</span><span class="p">)</span>
         <span class="k">print</span><span class="p">(</span><span class="s">"-"</span> <span class="o">*</span> <span class="mi">70</span><span class="p">)</span>
</code></pre></div>    </div>

    <p>Note that the query has a new “options” clause that invokes SQLAlchemy’s <code class="highlighter-rouge">selectinload</code> function to query for related data. Once the joined data is loaded into its corresponding <code class="highlighter-rouge">Course</code> object and relations (instructors, location). You can now manipulate the data as you would any other python object.</p>
  </li>
  <li>
    <p>The last thing that is important in these examples is the <strong>await/async</strong> concept, which we also saw in JavaScript. In this code example, all database queries are issued asynchronously. Because database queries are “expensive” (they take a lot of time), we don’t want our system blocking until the query completes. By using async / await, other parts of the system can continue to work while python is waiting for information to come back from the database server:</p>
    <ul>
      <li>The <code class="highlighter-rouge">async</code> keyword, which is put before a the function definition, indicates that the function is utilizing some asynchronous functionality.</li>
      <li>The <code class="highlighter-rouge">await</code> keyword is ensures that the next line of code within the function does not execute until the asynchronous function call has returned.</li>
    </ul>
  </li>
</ol>

<blockquote class="info">
  <h4 id="id_sqlalchemy-tasks">SQLAlchemy Tasks</h4>
  <p>Now that you’ve taken a look at some SQLAlchemy capabilities in more depth, please complete the following tasks:</p>

  <ol>
    <li>Short answer questions (to be answered in the Google Doc):
      <ol>
        <li>Please explain, in your own words, how the <code class="highlighter-rouge">print_schedules</code> function works (located inside of the <code class="highlighter-rouge">sample_orm_queries.py</code> file)  (no more than 3 sentences).</li>
        <li>Open <code class="highlighter-rouge">backend/populate.py</code> file and take a look at it. What does the <code class="highlighter-rouge">load_course_data</code> function do? Describe it in your own words in no more than three sentences.</li>
      </ol>
    </li>
    <li>Coding questions (to be completed in the <code class="highlighter-rouge">sample_orm_queries.py</code> file). Create the following 3 asynchronous functions:
      <ol>
        <li><code class="highlighter-rouge">print_usernames</code> – prints all of the usernames in the system (query the <code class="highlighter-rouge">User</code> model).</li>
        <li><code class="highlighter-rouge">print_unique_departments</code>  – prints a distinct list of departments (query the <code class="highlighter-rouge">Course</code> model).</li>
        <li><code class="highlighter-rouge">print_open_cs_courses</code> – prints the <code class="highlighter-rouge">crn</code> and <code class="highlighter-rouge">title</code> of courses in the CSCI department that are currently open (not full).</li>
      </ol>
    </li>
  </ol>
</blockquote>

<h3 id="id_3-building-fast-api-endpoints-docker-server-container">3. Building Fast API Endpoints (Docker Server container)</h3>
<p><a href="https://fastapi.tiangolo.com/" target="_blank">FastAPI</a> is a web framework for building web APIs with Python. Some reasons we’re using it in project 2:</p>
<ul>
  <li>It’s really fast (comparable to Node.js and Go).</li>
  <li>It supports asynchronous programming using Python’s async and await.</li>
  <li>It uses the routes and type hints that you define in your python code to automatically generate interactive documentation
    <ul>
      <li>If your Docker container is running, check it out: <a href="http://127.0.0.1:8000/docs" target="_blank">http://127.0.0.1:8000/docs</a></li>
    </ul>
  </li>
  <li>It uses python type hints to validate and serialize data (using the Pydantic library).</li>
</ul>

<p>Before completing your FastAPI tasks, I wanted to mention a few things:</p>

<h4 id="id_31-examining-serverpy">3.1. Examining server.py</h4>
<p><code class="highlighter-rouge">server.py</code> is the entrypoint for FastAPI. Please open it in VS Code and take a look at it.</p>
<ul>
  <li>The code on lines 1-33:
    <ul>
      <li>Imports the python libraries that your App uses</li>
      <li>Initializes the database (if needed), and</li>
      <li>Enables CORS (a security feature that allows your API to be accessed from clients that don’t share the server’s IP address – like your React App).</li>
    </ul>
  </li>
  <li>The remaining code in this file defines what your endpoints should do, including the input they accept and the format of the output.</li>
</ul>

<h4 id="id_32-examining-the-apiinstructors-endpoint">3.2. Examining the <code class="highlighter-rouge">/api/instructors/</code> endpoint</h4>
<p>You will be building some new API endponts in this section. Given this, let’s explore the anatomy of a FastAPI endpoint so that you understand how to make one. Let’s look at one of the existing endpoints in the <code class="highlighter-rouge">server.py</code> file to understand how it works:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/api/instructors/"</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">serializers</span><span class="p">.</span><span class="n">Instructor</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_instructors</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_db</span><span class="p">)):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">select</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Instructor</span><span class="p">).</span><span class="n">order_by</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Instructor</span><span class="p">.</span><span class="n">last_name</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">instructors</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">scalars</span><span class="p">().</span><span class="nb">all</span><span class="p">()</span>  <span class="c1"># Extract distinct department names
</span>    <span class="k">return</span> <span class="n">instructors</span>
</code></pre></div></div>

<h5 id="id_route-decorator">Route Decorator</h5>
<p>The first line of the code above…</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@app.get("/api/instructors/", response_model=List[serializers.Instructor])
</code></pre></div></div>

<p>…is a python decorator. A decorator in Python is a special type of function that modifies or enhances the behavior of another function or method (the one that’s directly below the decorator function, in this case <code class="highlighter-rouge">get_instructors()</code>). Decorators allows you to “wrap” another function with additional functionality without altering the function’s actual code.</p>

<p>This particular decorator’s job is to validate the inputs and outputs of the HTTP request:</p>
<ul>
  <li><code class="highlighter-rouge">app.get</code> is a method of the app object that specifies that the <code class="highlighter-rouge">get_instructors()</code> function should handle GET requests.</li>
  <li><code class="highlighter-rouge">/api/instructors/</code> is the path or endpoint where the GET request should be made.</li>
  <li><code class="highlighter-rouge">response_model=List[serializers.Instructor]</code> indicates the expected structure of the data returned by this endpoint. While the <code class="highlighter-rouge">get_instructors()</code> function actually returns a list of <code class="highlighter-rouge">Instructor</code> models, the <code class="highlighter-rouge">response_model</code> parameter determins how that list of <code class="highlighter-rouge">instructors</code> will be formatted and sent back to the client over HTTP.  Specifically:
    <ul>
      <li>The response should be a list.</li>
      <li>Each item in the list should conform to the <code class="highlighter-rouge">Instructor</code> format as defined in <code class="highlighter-rouge">serializers.py</code> (which uses Pydantic).</li>
    </ul>
  </li>
</ul>

<p>Try executing the endpoint using FastAPI’s built-in tester: <a href="http://localhost:8000/docs#/default/get_instructors_api_instructors__get" target="_blank">http://localhost:8000/docs</a></p>

<h5 id="id_function-definition">Function Definition</h5>
<p>The <code class="highlighter-rouge">get_instructors()</code> function should look pretty similar to the functions you made in the last section. However, one key difference is the <code class="highlighter-rouge">db: AsyncSession = Depends(get_db)</code> argument that is passed into the function.</p>

<p><code class="highlighter-rouge">Depends(get_db)</code> is a FastAPI dependency that injects a database session (AsyncSession) into the function. This allows you to abstract the database connection logic into get_db, making the function cleaner and reusable across different endpoints. FastAPI handles this behind the scenes, but just know that if you pass in that particular argument into your function, it will give you access to the database session so that you can execute SQLAlchemy queries.</p>

<h4 id="id_33-examining-the-apicourses-endpoint">3.3. Examining the <code class="highlighter-rouge">/api/courses/</code> endpoint</h4>
<p>In the assigned tasks below, you will need to accept data from the client using HTTP conventions. Let’s take a look at how the <code class="highlighter-rouge">/api/courses/</code> endpoint does this (it currently allows users to specify a search term and whether )</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"/api/courses/"</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">serializers</span><span class="p">.</span><span class="n">Course</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_courses</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span>
    <span class="n">instructor</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span>
    <span class="n">department</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span>
    <span class="n">hours</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="bp">None</span><span class="p">),</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">AsyncSession</span> <span class="o">=</span> <span class="n">Depends</span><span class="p">(</span><span class="n">get_db</span><span class="p">),</span>
<span class="p">):</span>

    <span class="c1"># base query to "courses" table that also asks SQLAlchemy
</span>    <span class="c1"># to join to the "instructors" and "locations" table.
</span>    <span class="n">query</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">).</span><span class="n">options</span><span class="p">(</span>
        <span class="n">selectinload</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">instructors</span><span class="p">),</span> 
        <span class="n">selectinload</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">location</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># includes a "title" filter if specified:
</span>    <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">title</span><span class="p">.</span><span class="n">ilike</span><span class="p">(</span><span class="sa">f</span><span class="s">"%</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s">%"</span><span class="p">))</span>

    <span class="c1"># includes a "department" filter if specified:
</span>    <span class="k">if</span> <span class="n">department</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">department</span> <span class="o">==</span> <span class="n">department</span><span class="p">)</span>

    <span class="c1"># includes an "hours" filter if specified:
</span>    <span class="k">if</span> <span class="n">hours</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="n">where</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">hours</span> <span class="o">==</span> <span class="n">hours</span><span class="p">)</span>

    <span class="c1"># includes an "instructors" filter if specified:
</span>    <span class="k">if</span> <span class="n">instructor</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">query</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">instructors</span><span class="p">).</span><span class="n">where</span><span class="p">(</span>
            <span class="n">or_</span><span class="p">(</span>
                <span class="n">models</span><span class="p">.</span><span class="n">Instructor</span><span class="p">.</span><span class="n">last_name</span><span class="p">.</span><span class="n">ilike</span><span class="p">(</span><span class="sa">f</span><span class="s">"%</span><span class="si">{</span><span class="n">instructor</span><span class="si">}</span><span class="s">%"</span><span class="p">),</span>
                <span class="n">models</span><span class="p">.</span><span class="n">Instructor</span><span class="p">.</span><span class="n">first_name</span><span class="p">.</span><span class="n">ilike</span><span class="p">(</span><span class="sa">f</span><span class="s">"%</span><span class="si">{</span><span class="n">instructor</span><span class="si">}</span><span class="s">%"</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="n">query</span><span class="p">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">department</span><span class="p">,</span> <span class="n">models</span><span class="p">.</span><span class="n">Course</span><span class="p">.</span><span class="n">code</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">courses</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">scalars</span><span class="p">().</span><span class="nb">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">courses</span>
</code></pre></div></div>

<p>There are two new elements that this function has that the previous function doesn’t:</p>
<ol>
  <li>
    <p>Query parameter arguments: note that in the function signature, there are 4 optional query parameters…</p>

    <ul>
      <li>title: str = Query(None),</li>
      <li>instructor: str = Query(None),</li>
      <li>department: str = Query(None),</li>
      <li>hours: int = Query(None)</li>
    </ul>

    <p>…that allow the user of the endpoint to specify the kind of data they want to be returned.</p>
  </li>
  <li>
    <p>Chaining of query filters: notice that the SQLAlchemy query can be further customized depending on the client’s preferences.</p>
  </li>
</ol>

<p>Try executing the endpoint using FastAPI’s built-in tester: <a href="http://localhost:8000/docs#/default/get_courses_api_courses__get" target="_blank">http://localhost:8000/docs</a>.</p>
<ul>
  <li>Note also that because of the way that the Python type hints have been specified in the function definition, the auto-documentation tool made the correct tester form. Pretty cool!</li>
</ul>

<blockquote class="info">
  <h4 id="id_fast-api-tasks">Fast API Tasks</h4>
  <p>Now that you understand how endpoints work, you’re going to create some new endpoints and modify some existing ones as follows:</p>

  <ol>
    <li>
      <p>Create a GET endpoint, <code class="highlighter-rouge">/api/departments</code>, that returns a distinct list of all of the department codes by querying the <code class="highlighter-rouge">Course</code> model. The return datatype should be a list of strings (e.g., <code class="highlighter-rouge">response_model=List[str]</code>). The data returned from the endpoint should look something like this:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [
     "ACCT",
     "AFST",
     "AM",
     "AMS",
     "ANTH",
     "ART",
     "ARTH",
     "ARTS",
     "ASIA",
     ...
 ]
</code></pre></div>      </div>
    </li>
    <li>
      <p>Create a GET endpoint, <code class="highlighter-rouge">/api/users/{username}</code> that returns a single user from the database by querying the <code class="highlighter-rouge">User</code> model. The data returned from this endpoint request, <code class="highlighter-rouge">/api/users/svanwart</code>, should look something like this:</p>

      <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> {
     "id": 18,
     "username": "svanwart",
     "email": "svanwart@unca.edu",
     "first_name": "Sarah",
     "last_name": "Van Wart"
 }
</code></pre></div>      </div>
    </li>
    <li>
      <p>Modify the <code class="highlighter-rouge">/api/courses</code> endpoint functionality to support the following additional filters:</p>
      <ul>
        <li>Whether the course matches a special category (DI, DIR, honors, FYS, open v. closed). Do this in any way you like.</li>
        <li>Whether to show only open courses</li>
        <li>Matching days</li>
      </ul>
    </li>
  </ol>
</blockquote>

<h3 id="id_4-building-your-react-client-nodejs--static-files">4. Building your React client (Node.js + static files)</h3>

<p>Since you’ve had a bit more experience with React than you have with Fast API, I won’t go into much detail here. That said, a few notes:</p>

<ol>
  <li>Remember that your React client is running on your host machine (versus on Docker). Make sure you’re running the node development server within your <code class="highlighter-rouge">ui</code> directory (<code class="highlighter-rouge">npm run dev</code>).</li>
  <li>Before attempting the coding tasks, spend some time getting oriented with the React app. Specifically:
    <ul>
      <li>Click the “View Schedule” button (top right) and see what happens.</li>
      <li>Try adding and removing classes from your schedules. What happens?</li>
      <li>Try searching for classes based on <code class="highlighter-rouge">title</code>, <code class="highlighter-rouge">department</code>, <code class="highlighter-rouge">instructor</code>, and <code class="highlighter-rouge">credit hours</code> (which are implemented). How does it work? How do the user’s search parameters get translated to the API end point?</li>
    </ul>
  </li>
</ol>

<blockquote class="info">
  <h4 id="id_react-tasks">React Tasks</h4>
  <p>After examining the React starter code and getting familiar with the components, please complete the following tasks:</p>

  <ol>
    <li>Short answer questions (to be answered in the Google Doc):
      <ol>
        <li>Please explain how the <code class="highlighter-rouge">CourseSearchForm.jsx</code> component is able to communicate with the <code class="highlighter-rouge">CourseList.jsx</code> component. In other words, how does the <code class="highlighter-rouge">CourseList</code> know to redraw when the form is submitted?</li>
        <li>What are some of the advantages of using a web interface to plan your schedule versus a command line interface?</li>
      </ol>
    </li>
    <li>Coding questions (to be completed in the relevant React component files inside of <code class="highlighter-rouge">ui</code>). Please complete the following tasks:
      <ol>
        <li>
          <p>Modify the <code class="highlighter-rouge">fetchUser()</code> function inside of <code class="highlighter-rouge">services/apis.jsx</code>. It currently looks like this:</p>

          <pre><code class="language-JS"> export async function fetchUser(username) {
     return {
         id: 18,
         username: "svanwart",
         email: "svanwart@unca.edu",
         first_name: "Sarah",
         last_name: "Van Wart",
     };
 }
</code></pre>

          <p>You will replace the hard-coded return value with functionality that retrieves and returns the user corresponding to the <code class="highlighter-rouge">username</code> argument from the <code class="highlighter-rouge">api/users/{username}</code> endpoint.</p>
        </li>
        <li>
          <p>Modify the <code class="highlighter-rouge">CourseSearchForm.jsx</code> component so that the departments shown in the dropdown list are generated from the results of a query to <code class="highlighter-rouge">/api/departments</code>. You will need to use React’s <code class="highlighter-rouge">useState</code> and <code class="highlighter-rouge">useEffect</code>, and the JavaScript <code class="highlighter-rouge">map</code> function to generate each <code class="highlighter-rouge">&lt;Select.Option /&gt;</code>.</p>
        </li>
        <li>
          <p>Get the form / search results to honor the “Designation”, “Days”, and “Open Only” parameters. This will involve building the URL query string based on the form data (see the <code class="highlighter-rouge">fetchCourses</code> function inside of <code class="highlighter-rouge">services/apis.jsx</code>). You will need to make sure that the the URL you build conforms to the rules you created when you were implementing the API.</p>
        </li>
      </ol>
    </li>
  </ol>
</blockquote>

<h3 id="id_5-final-exam-reflection">5. Final Exam Reflection</h3>
<p>You are now at the end. Congratulations! As part of your reflective final assessment (extending your thinking beyond Project 2 to encompass all you have learned this semester), please answer these final 5 questions:</p>

<blockquote class="info">
  <h4 id="id_course-reflection-tasks">Course Reflection Tasks</h4>
  <p>Short answer questions (to be answered in the Google Doc):</p>
  <ol>
    <li>Reflect on the value of the static analysis tools that you used in Project 1:
      <ul>
        <li>How were they useful? How were they not useful?</li>
        <li>Would you use them again if you were working on a different software project?</li>
      </ul>
    </li>
    <li>What are some of the dependencies that are used in Project 2 on the server-side? What are some of the trade-offs associated with adding these new dependencies? How do dependencies make your life both harder and easier?</li>
    <li>What are some of the dependencies that are used in Project 2 on the client-side? What are some of the trade-offs associated with adding these new dependencies? How do dependencies make your life both harder and easier?</li>
    <li>What are some software development considerations on the UI side that don’t exist on the server-side? Is UI engineering easier than server side engineering?</li>
    <li>Reflect on the two approaches to make your schedule planner (across Projects 1 &amp; Project 2):
      <ul>
        <li>What are some of the key differences between the two different architectures?</li>
        <li>At what point does the added complexity introduced in Project 2 become worth the effort (in your opinion)?</li>
      </ul>
    </li>
  </ol>
</blockquote>

<h2 id="id_what-to-turn-in">What to Turn In</h2>

<h3 id="id_checklist">Checklist</h3>
<p>Please make sure the following tasks have been completed:</p>

<ul class="checkbox-list">
  <li>All questions in the Google Doc have been answered.</li>
  <li>You have implemented the following three SQLAlchemy functions in <code class="highlighter-rouge">sample_orm_queries.py</code>:
    <ul>
      <li><code class="highlighter-rouge">print_usernames()</code></li>
      <li><code class="highlighter-rouge">print_unique_departments()</code></li>
      <li><code class="highlighter-rouge">print_open_cs_courses()</code></li>
    </ul>
  </li>
  <li>You have made the requested FastAPI endpoint modifications in <code class="highlighter-rouge">server.py</code>, including:
    <ul>
      <li>Implementing <code class="highlighter-rouge">/api/departments</code></li>
      <li>Impelementing <code class="highlighter-rouge">/api/users/{username}</code></li>
      <li>Enhancing <code class="highlighter-rouge">/api/courses</code></li>
    </ul>
  </li>
  <li>You have completed the three React tasks:
    <ul>
      <li>Modifying <code class="highlighter-rouge">fetchUser()</code> to pull from <code class="highlighter-rouge">api/users/{username}</code></li>
      <li>Modifying the department dropdown list to pull from <code class="highlighter-rouge">/api/departments</code></li>
      <li>Getting the search form to honor the “Designation”, “Days”, and “Open Only” parameters</li>
    </ul>
  </li>
  <li>Ensured that static linter / formatter checks pass for both the server-side code and the python code:
    <ul>
      <li>Server-side checks (run from Docker shell): <code class="highlighter-rouge">bash scripts/check.py</code></li>
      <li>Client-side checks (run from your local computer):
        <ul>
          <li><code class="highlighter-rouge">npm run format:check</code></li>
          <li><code class="highlighter-rouge">npm run format:fix</code></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="id_what-to-turn-in-1">What to Turn In</h3>
<p>When you’re done:</p>
<ol>
  <li>Push your <code class="highlighter-rouge">project02</code> branch to GitHub and make a pull request. Please ensure that the destination (left-hand side) is pointing to the <code class="highlighter-rouge">main</code> branch of <strong>your repo</strong> and the source (right-hand side) is pointing to the <code class="highlighter-rouge">project02</code> branch of <strong>your repo</strong>.</li>
  <li>Paste your PR link at the top of your “Answers” Google Document.</li>
  <li>Upload your Google Document as a Word or PDF on the Moodle under the project 2 assignment.</li>
</ol>



            </article>  
        </main>
        <footer>
            <p>    
                Department of Computer Science, UNC Asheville
            </p>
        </footer>
        
        <script type="text/javascript" src="/spring2025/assets/js/main.js"></script>

<!-- <script>
    //little bit of a hack:
    const scrollLeft = () => {
        //console.log('scrollLeft');
        document.documentElement.scrollLeft = 0;
    };
    setTimeout(scrollLeft, 100);
</script> -->
        
        <script>
            window.h_max = "5";
        </script>
        
        <script type="text/javascript" src="/spring2025/assets/js/scrollspy.js"></script>
        <script type="text/javascript" src="/spring2025/assets/js/expandable.js"></script>
    </body>
</html>