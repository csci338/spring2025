<!doctype html>
<html lang="en">
    <head>
            <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/spring2025/assets/images/favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Testing & Static Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/spring2025/assets/main.css">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163192686-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-163192686-1');
    </script>
    </head>
    <body class="two-column">
        <!-- banner -->
<header>
    <section>
        <h1 class="desktop"><a href="/spring2025/">CSCI 338: Spring 2025</a></h1>
        <h2 class="desktop">Software Engineering</h2>
        <a class="mobile" href="#">
            <i class="menu-toggle fas fa-bars"></i>
        </a>
        <h1 class="mobile">CSCI 338: Spring 2025</h1>
    </section>
    <img src="https://communication.unca.edu/wp-content/themes/tin/assets/logo.svg" />
</header>
        <nav>
    <ul>
        <li ><a href="/spring2025/syllabus/">Syllabus</a>
        </li>
        <li ><a
                href="/spring2025/">Schedule</a></li>
        <!-- <li ><a
                href="/spring2025/topics/">Topics</a></li> -->
        <li class="active" ><a
            href="/spring2025/assignments/">Assignments</a></li>
        <li ><a
            href="/spring2025/resources/">Resources</a></li> 
        <li ><a href="/spring2025/repos/">Repos</a>
        </li>
        <li><a href="https://drive.google.com/drive/folders/12PKfUx86a0Toz7I7bscB6m3rzPK8EjG0?usp=sharing"
                target="_blank">Videos</a></li>
    </ul>
</nav>
        <main>
            <aside>
                
                
                <ol class="side-menu">
  <li><a href="#id_introduction--background">Introduction &amp; Background</a>
    <ol>
      <li><a href="#id_this-is-an-either-or-assignment">This is an “Either Or” Assignment</a></li>
    </ol>
  </li>
  <li><a href="#id_set-up">Set Up</a></li>
  <li><a href="#id_option-1-javascript">Option 1. JavaScript</a>
    <ol>
      <li><a href="#id_1-implement-the-rock-paper-scissors-function">1. Implement the “Rock Paper Scissors” function</a></li>
      <li><a href="#id_2-write-the-tests-without-a-framework">2. Write the tests WITHOUT a framework</a></li>
      <li><a href="#id_3-write-the-tests-with-a-framework-mocha">3. Write the tests with a framework (Mocha)</a>
        <ol>
          <li><a href="#id_install-mocha">Install Mocha</a></li>
          <li><a href="#id_run-the-mocha-tests">Run the mocha tests</a></li>
        </ol>
      </li>
      <li><a href="#id_4-rewrite-your-tests-using-the-mocha-conventions">4. Rewrite your tests using the Mocha conventions</a></li>
      <li><a href="#id_5-install-configure-and-run-the-static-analysis--formatting-tools">5. Install, configure, and run the static analysis / formatting tools</a>
        <ol>
          <li><a href="#id_prettier">Prettier</a></li>
          <li><a href="#id_es-lint">ES Lint</a></li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="#id_option-2-python">Option 2. Python</a>
    <ol>
      <li><a href="#id_1-configure-poetry">1. Configure Poetry</a></li>
      <li><a href="#id_2-implement-the-rock-paper-scissors-function">2. Implement the “Rock Paper Scissors” function</a></li>
      <li><a href="#id_3-write-the-tests-without-a-framework">3. Write the tests WITHOUT a framework</a></li>
      <li><a href="#id_4-write-the-tests-with-a-framework-unittest">4. Write the tests with a framework (unittest)</a>
        <ol>
          <li><a href="#id_run-the-unittest-tests">Run the unittest tests</a></li>
          <li><a href="#id_rewrite-your-tests-using-the-unittest-conventions">Rewrite your tests using the unittest conventions</a></li>
        </ol>
      </li>
      <li><a href="#id_5-install-configure-and-run-the-static-analysis--formatting-tools-1">5. Install, configure, and run the static analysis / formatting tools</a>
        <ol>
          <li><a href="#id_black">Black</a></li>
          <li><a href="#id_flake8">Flake8</a></li>
          <li><a href="#id_isort">iSort</a></li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="#takeaways">Takeaways</a></li>
  <li><a href="#id_what-to-submit">What to Submit</a></li>
</ol>

            </aside>
            <article>
                

    
    <h1>
        <a href="../assignments/">Assignments</a> >
        Lab 6: Testing & Static Analysis
    </h1>
    
 
                <p>
    
        Due on Wed, 02/26 @ 11:59PM.
    
    
        6 Points.
    
    
</p>

<h2 id="id_introduction--background">Introduction &amp; Background</h2>
<p>The goal of this lab is to get you familiar with some automated testing and static analysis tools that are commonly used in industry. To do this, you are going:</p>
<ol>
  <li>Pick a language / environment: <strong>either</strong> Python <strong>or</strong> JavaScript</li>
  <li>Implement a “rock paper scissors” function</li>
  <li>Write some vanilla unit tests for your function</li>
  <li>Re-write your tests using a testing framework</li>
  <li>Perform some static analysis tests on your code – and fix any errors</li>
  <li>Create a pull request.</li>
</ol>

<blockquote>
  <h3 id="id_this-is-an-either-or-assignment">This is an “Either Or” Assignment</h3>
  <ul>
    <li>You only have to implement the rock paper scissors activities in <strong>ONE of the languages</strong> (either JavaScript or Python).</li>
    <li><strong>Extra Credit:</strong> If you need to make up a lab or if you would like to earn 6 points extra credit (equivalent to 1 Lab), you can do both options.</li>
  </ul>
</blockquote>

<h2 id="id_set-up">Set Up</h2>
<p>Before you begin, get the latest code from <a href="https://github.com/csci338/class-exercises-spring2025" target="_blank">class-exercises-spring2025</a>.</p>
<ul>
  <li>If you are a Windows user, you will do this lab (and all subsequent work in this class) using the WSL terminal.</li>
</ul>

<p><strong>On GitHub:</strong></p>
<ul>
  <li>Sync the latest changes from the class version of <code class="highlighter-rouge">class-exercises-spring2025</code> to your copy of the repo on GitHub.</li>
</ul>

<p><strong>On your local computer:</strong></p>
<ul>
  <li>Make sure that all of your changes from the last lab are staged and committed.</li>
  <li>Checkout your main branch: <code class="highlighter-rouge">git checkout main</code></li>
  <li>Pull down the latest changes: <code class="highlighter-rouge">git pull</code>
    <ul>
      <li>If you did it correctly, you will notice that a new <code class="highlighter-rouge">lab06</code> folder has been created.</li>
    </ul>
  </li>
  <li>Create a new branch called lab06: <code class="highlighter-rouge">git checkout -b lab06</code></li>
  <li>Verify that you’re on your new branch: <code class="highlighter-rouge">git branch</code></li>
</ul>

<h2 id="id_option-1-javascript">Option 1. JavaScript</h2>
<p>Begin by completing the JavaScript tasks, which are located in the <code class="highlighter-rouge">javascript_rps</code> folder (<code class="highlighter-rouge">rps</code> stands for “rock paper scissors”), as described below:</p>

<h3 id="id_1-implement-the-rock-paper-scissors-function">1. Implement the “Rock Paper Scissors” function</h3>
<p>Open <code class="highlighter-rouge">your-task.js</code> and take a look at the <code class="highlighter-rouge">rps</code> function, which should look like this:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">function</span> <span class="nx">rps</span><span class="p">(</span><span class="nx">hand1</span><span class="p">,</span> <span class="nx">hand2</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// finish this code:</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">hand1</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">rock</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nx">hand2</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">paper</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">"</span><span class="s2">Paper wins!</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="dl">"</span><span class="s2">invalid</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Implement the following “rock paper scissors” logic and return the corresponding message (exactly as it is shown below):</p>
<ul>
  <li>If one hand is <strong>rock</strong> and the other is <strong>paper</strong>, return the string <strong>“Paper wins!”</strong></li>
  <li>If one hand is <strong>paper</strong> and the other is <strong>scissors</strong>, return the string <strong>“Scissors wins!”</strong></li>
  <li>If one hand is <strong>scissors</strong> and the other is <strong>rock</strong>, return the string <strong>“Rock wins!”</strong></li>
  <li>If both hands are the same (and have valid arguments), return <strong>“Tie!”</strong></li>
  <li>If anything other than rock, paper, or scissors are passed in, return <strong>“Invalid”</strong></li>
</ul>

<h3 id="id_2-write-the-tests-without-a-framework">2. Write the tests WITHOUT a framework</h3>
<p>As you are writing your <code class="highlighter-rouge">rps</code> function, write corresponding tests to verify your implementation for different possible arguments that a user might pass in.</p>

<p>You will first write some tests <em>without</em> a framework. To help you, I have written two helper functions in <code class="highlighter-rouge">helpers.js</code>. The high-level point here is that <strong>anyone can write and run tests – simply and easily – without using a fancy testing library</strong>. Please open the <code class="highlighter-rouge">run-tests-vanilla.js</code> file to inspect how these two helper functions are used. Pause and try and understand what this code does.</p>

<p>When you’ve thought about it, please run the test suite by navigating into the <code class="highlighter-rouge">javascript_rps</code> directory from the command line and running the following command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node run-tests-vanilla.js 
</code></pre></div></div>

<p>Your should see the following output:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> node run-tests-vanilla.js

<span class="nt">----------------------------------------------------</span>
✅ Success: it returns <span class="s2">"Hello world!"</span>
✅ Success: paper beats rock
❌ Failure: paper beats rock <span class="o">(</span>flipped<span class="o">)</span>
<span class="nt">----------------------------------------------------</span>

😬 Only  2 out of 3 tests passed.
</code></pre></div></div>

<p>Please write all the tests to ensure that the relevant possible inputs yield the expected output. As you make new test functions, don’t forget to add the name of the function definition to the list of tests that are passed into the <code class="highlighter-rouge">runAllTests</code> function (at the bottom of the file).</p>

<h3 id="id_3-write-the-tests-with-a-framework-mocha">3. Write the tests with a framework (Mocha)</h3>
<p>Now that you have implemented the <code class="highlighter-rouge">rps</code> function and written the corresponding tests using “vanilla” JavaScript, you are going to rewrite your tests to use <strong>Mocha</strong> – a JavaScript testing framework.</p>

<h4 id="id_install-mocha">Install Mocha</h4>
<p>Mocha offers a set of functions and objects that organize your tests and make them easier to define and write. It also requires that all tests be placed in a folder called <code class="highlighter-rouge">tests</code>. Create a Node project and install <code class="highlighter-rouge">mocha</code> via the npm package manager as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create the package.json file:</span>
npm init <span class="nt">-y</span>  

<span class="c"># install mocha as a dev dependency:</span>
npm <span class="nb">install </span>mocha <span class="nt">--save-dev</span>
</code></pre></div></div>

<p>Verify that a <code class="highlighter-rouge">package.json</code> file and a <code class="highlighter-rouge">node_modules</code> folder have been created.</p>

<h4 id="id_run-the-mocha-tests">Run the mocha tests</h4>
<p>To run the tests, modify <code class="highlighter-rouge">package.json</code> by setting the test value to “mocha”:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mocha"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>You can now issue the following command to run the mocha test suite:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm test
</code></pre></div></div>

<p>If you did it correctly you should see output that looks like the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> mocha



  Hello World Tests
    ✔ returns <span class="s2">"Hello world!"</span>

  Rock Paper Scissors Tests
    1<span class="o">)</span> knows that paper beats rock


  1 passing <span class="o">(</span>3ms<span class="o">)</span>
  1 failing

  1<span class="o">)</span> Rock Paper Scissors Tests
       knows that paper beats rock:

      AssertionError <span class="o">[</span>ERR_ASSERTION]: <span class="s1">'invalid'</span> <span class="o">==</span> <span class="s1">'Paper wins!'</span>
      + expected - actual

      <span class="nt">-invalid</span>
      +Paper wins!
      
      at Context.&lt;anonymous&gt; <span class="o">(</span>file:///.../lab06/javascript_rps/test/run-tests-mocha.js:60:16<span class="o">)</span>
      at process.processImmediate <span class="o">(</span>node:internal/timers:478:21<span class="o">)</span>
</code></pre></div></div>

<h3 id="id_4-rewrite-your-tests-using-the-mocha-conventions">4. Rewrite your tests using the Mocha conventions</h3>
<p>Once you have successfully run the tests, open the <code class="highlighter-rouge">tests/run-tests-mocha.js</code> file and see if you can understand what’s going on. Pause and think. What is the same and what is different?</p>

<p>After inspecting the code, please add new mocha tests to exhaustively test the <code class="highlighter-rouge">rps</code> function using the Mocha helper functions. Note that instead of your functions returning <strong>true</strong> or <strong>false</strong>, you need to use Node’s built-in <code class="highlighter-rouge">assert</code> module.</p>

<h3 id="id_5-install-configure-and-run-the-static-analysis--formatting-tools">5. Install, configure, and run the static analysis / formatting tools</h3>
<p>We’re now going to use some code formatting and linting tools:</p>
<ul>
  <li><strong><code class="highlighter-rouge">prettier</code></strong> – our code formatting tool for ensuring that your team has the same coding style conventions (indentation, curly brace placement, etc.).</li>
  <li><strong><code class="highlighter-rouge">eslint</code></strong> – our linting tool for analyzing code for possible errors, style violations, or inefficiencies. Linters sometimes make code changes, but usually just point out potential issues that need to be solved manually.</li>
</ul>

<h4 id="id_prettier">Prettier</h4>
<p>Prettier enforces formatting rules using the <code class="highlighter-rouge">.prettierrc</code> configuration file. I have already made a simple <code class="highlighter-rouge">.prettierrc</code> file for you, but you can add additional rules to enforce additional coding style parameters. Please open it and take a look!</p>

<p><strong>Install and configure prettier:</strong></p>

<p>To get <code class="highlighter-rouge">prettier</code> working with you code, you need to install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>prettier <span class="nt">--save-dev</span>
</code></pre></div></div>

<p>Once you have installed it, you should see <code class="highlighter-rouge">prettier</code> listed as a dev dependency in your <code class="highlighter-rouge">package.json</code> file.</p>

<p>You will also need to update your <code class="highlighter-rouge">package.json</code> file by adding 2 new entries (below your test entry) in the scripts section:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">...</span><span class="w">
</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mocha"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"format:check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prettier --check </span><span class="se">\"</span><span class="s2">**/*.{js,jsx}</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"format:fix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prettier --write </span><span class="se">\"</span><span class="s2">**/*.{js,jsx}</span><span class="se">\"</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span></code></pre></div></div>

<p>Note the placement of commas after each line but the last one. Once these entries have been added, you will be able to run prettier from the command line.</p>

<p><strong>Run the prettier check:</strong></p>

<p>You are now ready to run the code formatter. First run the format checker from the command line (from with the <code class="highlighter-rouge">javascript_rps</code> directory) as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run format:check
</code></pre></div></div>

<p>This command will tell you which of your JavaScript files do not conform to the style guide. Take a look and make a note of these files.</p>

<p>To fix these files, just run prettier with the –fix flag (which you just configured in your <code class="highlighter-rouge">.package.json</code> file). This command will actually reformat your code:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run format:fix
</code></pre></div></div>

<p>Open one of your “fixed” <code class="highlighter-rouge">.js</code> files and note what changed. Then run the prettier check again. The check should now report that no formatting errors were found.</p>

<h4 id="id_es-lint">ES Lint</h4>
<p>ES Lint enforces linting rules using the <code class="highlighter-rouge">eslint.config.js</code> configuration file. I have already made a simple <code class="highlighter-rouge">eslint.config.js</code> file for you, but you can add additional checks and rules rules. Please open it and take a look!</p>
<ul>
  <li>Note that because we are using some mocha functions (e.g., <code class="highlighter-rouge">describe</code>, <code class="highlighter-rouge">it</code>, etc.), we need to teach the linter that these functions are indeed valid functions so they don’t raise errors (they’re global functions and it’s hard for <code class="highlighter-rouge">eslint</code> to tell where they come from).</li>
</ul>

<p><strong>Install and configure eslint:</strong></p>

<p>To get <code class="highlighter-rouge">eslint</code> working with you code, you need to install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install </span>eslint eslint-plugin-mocha <span class="nt">--save-dev</span>
</code></pre></div></div>

<p>Once you have installed it, you should see <code class="highlighter-rouge">eslint</code> and <code class="highlighter-rouge">eslint-plugin-mocha</code> listed as a dev dependency in your <code class="highlighter-rouge">package.json</code> file.</p>

<p>You will also need to update your <code class="highlighter-rouge">package.json</code> file by adding 2 new entries (below your <code class="highlighter-rouge">format:fix</code> entry) in the scripts section:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">...</span><span class="w">
</span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mocha"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"format:check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prettier --check </span><span class="se">\"</span><span class="s2">**/*.{js,jsx}</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"format:fix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prettier --write </span><span class="se">\"</span><span class="s2">**/*.{js,jsx}</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lint:check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eslint . &amp;&amp; echo </span><span class="se">\"</span><span class="s2">All ES Lint checks pass!</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lint:fix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eslint . --fix &amp;&amp; echo </span><span class="se">\"</span><span class="s2">All ES Lint checks pass!</span><span class="se">\"</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="err">...</span><span class="w">
</span></code></pre></div></div>

<p>Note the placement of commas after each line but the last one. Once these entries have been added, you will be able to run eslint from the command line.</p>

<p><strong>Run the eslint check:</strong></p>

<p>You are now ready to run the linter. First run the linter check from the command line (from with the <code class="highlighter-rouge">javascript_rps</code> directory) as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run lint:check
</code></pre></div></div>

<p>This command will tell you which of your JavaScript files do not conform to the linting rules. Take a look and make a note of these files.</p>

<p>As a first step to fixing these files, just run eslint with the <code class="highlighter-rouge">--fix</code> flag (which you just configured in your <code class="highlighter-rouge">.package.json</code> file). This command will try to auto-correct some of your linting errors…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run format:fix
</code></pre></div></div>
<p>…that said, other errors might need to be corrected manually.</p>

<p>You are now done with the JavaScript version of this lab.  If you want 6 points extra credit, you can also do the JavaScript version of this lab. Otherwise, please jump down to <a href="#takeaways">“Takeaways”</a>.</p>

<h2 id="id_option-2-python">Option 2. Python</h2>
<p>The Python version of these files is located in the <code class="highlighter-rouge">python_rps</code> folder. Please navigate to it on the terminal.</p>

<h3 id="id_1-configure-poetry">1. Configure Poetry</h3>
<p>Initialize a poetry project within the <code class="highlighter-rouge">python_rps</code> folder (and keep pressing enter to take all the defaults):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># initialize poetry:</span>
poetry init
</code></pre></div></div>

<h3 id="id_2-implement-the-rock-paper-scissors-function">2. Implement the “Rock Paper Scissors” function</h3>
<p>Open <code class="highlighter-rouge">your-task.py</code> and take a look at the rps function, which should look like this:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rps</span><span class="p">(</span><span class="n">hand1</span><span class="p">,</span> <span class="n">hand2</span><span class="p">):</span>
    <span class="c1"># finish this code:
</span>    <span class="k">if</span> <span class="n">hand1</span> <span class="o">==</span> <span class="s">"rock"</span> <span class="ow">and</span> <span class="n">hand2</span> <span class="o">==</span> <span class="s">"paper"</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">"Paper wins!"</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s">"Invalid"</span>
</code></pre></div></div>

<p>Your job is to implement the function using the same logic as described above.</p>

<h3 id="id_3-write-the-tests-without-a-framework">3. Write the tests WITHOUT a framework</h3>
<p>As you are writing your rps function, write corresponding tests to verify your implementation for different possible arguments that a user might pass in.</p>

<p>Like before, you will first write your tests without a framework. To help you, I have written two helper functions in <code class="highlighter-rouge">helpers.py</code>. Please open the <code class="highlighter-rouge">run_tests_vanilla.py</code> file to inspect how these two helper functions are used. Pause and try and understand what this code does.</p>

<p>When you’ve thought about it, please run the test suite by navigating into the <code class="highlighter-rouge">python_rps</code> folder and running the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python run_tests_vanilla.py
</code></pre></div></div>

<p>You should see the following output:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python run_tests_vanilla.py
<span class="nt">--------------------------------------------------</span>
✅ Success: It returns <span class="s2">"Hello world!"</span>
✅ Success: Paper beats rock
❌ Failure: Paper beats rock <span class="o">(</span>flipped<span class="o">)</span>
<span class="nt">--------------------------------------------------</span>

😬 Only  2 out of 3 tests passed.
</code></pre></div></div>

<p>Please write additional tests to ensure that all possible inputs yield the expected output. As you make new test functions, don’t forget to add the name of the function definition to the list of tests that are passed into the <code class="highlighter-rouge">run_all_tests</code> function (at the bottom of the file).</p>

<h3 id="id_4-write-the-tests-with-a-framework-unittest">4. Write the tests with a framework (unittest)</h3>
<p>Now that you have implemented the rps function and written the corresponding tests using “vanilla” Python, you are going to rewrite your tests to use <strong>unittest</strong> – a built-in Python module is part of the Python language. Like Mocha, <strong>unittest</strong> offers programmers a set of convenience functions and classes for organizing and writing tests.</p>

<p>Learn more here: <a href="https://docs.python.org/3/library/unittest.html" target="_blank">https://docs.python.org/3/library/unittest.html</a></p>

<p>Please open <code class="highlighter-rouge">run_tests_framework.py</code>. In this file, a “starter” test class has been defined for you. It includes two starter tests that you can use a model for writing your tests.</p>

<h4 id="id_run-the-unittest-tests">Run the unittest tests</h4>
<p>To run the <code class="highlighter-rouge">unittest</code> version of your tests, issue the following command on the CLI (from within the python_rps directory):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python run_tests_framework.py <span class="nt">--verbose</span>
</code></pre></div></div>

<p>If you did it correctly you should see output that looks like the following:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test_hello_world <span class="o">(</span>__main__.TestStringMethods.test_hello_world<span class="o">)</span> ... ok
test_paper_beats_rock <span class="o">(</span>__main__.TestStringMethods.test_paper_beats_rock<span class="o">)</span> ... FAIL

<span class="o">======================================================================</span>
FAIL: test_paper_beats_rock <span class="o">(</span>__main__.TestStringMethods.test_paper_beats_rock<span class="o">)</span>
<span class="nt">----------------------------------------------------------------------</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">"/.../labs/lab06/python_rps/run_tests_framework.py"</span>, line 51, <span class="k">in </span>test_paper_beats_rock
    self.assertEqual<span class="o">(</span>rps<span class="o">(</span><span class="s1">'paper'</span>, <span class="s1">'rock'</span><span class="o">)</span>, <span class="s1">'Paper wins!'</span><span class="o">)</span>
AssertionError: <span class="s1">'Invalid'</span> <span class="o">!=</span> <span class="s1">'Paper wins!'</span>
- Invalid
+ Paper wins!


<span class="nt">----------------------------------------------------------------------</span>
Ran 2 tests <span class="k">in </span>0.000s

FAILED <span class="o">(</span><span class="nv">failures</span><span class="o">=</span>1<span class="o">)</span>
</code></pre></div></div>

<h4 id="id_rewrite-your-tests-using-the-unittest-conventions">Rewrite your tests using the unittest conventions</h4>
<p>Once you have successfully run the tests, open the <code class="highlighter-rouge">run_tests_framework.py</code> file and see if you can understand what’s going on. Pause and think. What is the same and what is different?</p>

<p>After inspecting the code, please add new <code class="highlighter-rouge">unittest</code> tests to exhaustively test the rps function using the helper functions. Note that instead of having your functions return <strong>True</strong> or <strong>False</strong>, you will now need to use the unittest.TestCase methods. Examples:</p>

<ul>
  <li><code class="highlighter-rouge">self.assertTrue</code></li>
  <li><code class="highlighter-rouge">self.assertEqual</code></li>
</ul>

<p>A list of possible methods is described here: <a href="https://docs.python.org/3/library/unittest.html" target="_blank">https://docs.python.org/3/library/unittest.html</a></p>

<h3 id="id_5-install-configure-and-run-the-static-analysis--formatting-tools-1">5. Install, configure, and run the static analysis / formatting tools</h3>
<p>We’re now going to use some code formatting and linting tools:</p>
<ul>
  <li><strong><code class="highlighter-rouge">black</code></strong> – our code formatting tool for ensuring that your team has the same coding style conventions (indentation, naming conventions, line width, etc.).</li>
  <li><strong><code class="highlighter-rouge">flake8</code></strong> – our linting tool for analyzing code for possible errors, style violations, or inefficiencies. Linters sometimes make code changes, but usually just point out potential issues that need to be solved manually.</li>
  <li><strong><code class="highlighter-rouge">isort</code></strong> – our import sorter for ensuring that import statements are alphabetized (for consistency).</li>
</ul>

<h4 id="id_black">Black</h4>
<p>Black is a PEP 8 compliant opinionated formatter. Black reformats entire files in place. Style configuration options are deliberately limited and rarely added. In other words, unlike prettier, the formatting rules are typically fixed (you shouldn’t need to override them).</p>

<p><strong>Install black:</strong></p>

<p>To get <code class="highlighter-rouge">black</code> working with you code, you need to install it via poetry:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add black
</code></pre></div></div>

<p>Once you have installed it, you should see <code class="highlighter-rouge">black</code> listed as a dev dependency in your <code class="highlighter-rouge">pyproject.toml</code> file.</p>

<p><strong>Run the black check:</strong></p>

<p>You are now ready to run the code formatter. First run the format checker from the command line (from with the <code class="highlighter-rouge">python_rps</code> directory) as follows:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run black <span class="nb">.</span>
</code></pre></div></div>

<p>Don’t forget the <code class="highlighter-rouge">.</code> which instructs black to be run on all files recursively within the current directory.</p>

<p>This command will tell you which of your python files was modified / reformatted. Open one of your “fixed” <code class="highlighter-rouge">.py</code> files and note what changed.</p>

<p>If you run the black command for a second time, no files should change.</p>

<h4 id="id_flake8">Flake8</h4>
<p>Flake8 enforces linting rules. Before we use it, we need to install it</p>

<p><strong>Install and configure flake8:</strong></p>

<p>To get <code class="highlighter-rouge">flake8</code> working with you code, you need to install it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add flake8
</code></pre></div></div>

<p>Once you have installed it, you should see <code class="highlighter-rouge">flake8</code> listed as a  dependency in your <code class="highlighter-rouge">pyproject.toml</code> file.</p>

<p><strong>Run the flake8 check:</strong></p>

<p>You are now ready to run the linter from the command line (from with the <code class="highlighter-rouge">python_rps</code> directory):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run flake8 <span class="nb">.</span>
</code></pre></div></div>

<p>This command will tell you which of your python files do not conform to the PEP 8 / linting rules. Take a look and make a note of these files.</p>

<p>One tricky thing about using linters and code formatters together is that they sometimes have conflicting rules. For instance, each may have a different rule for the correct length of a line length or whether it’s OK to have trailing whitespace.</p>

<p>To deal with this problem, you will make a declarative configuration file at the root of your <code class="highlighter-rouge">python_rps</code> folder called <code class="highlighter-rouge">.flake8</code> and add some rules to override the <code class="highlighter-rouge">flake8</code> style settings so that they match the ones specified in <code class="highlighter-rouge">black</code>. Please paste the following rules into the <code class="highlighter-rouge">.flake8</code> file you just made:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[flake8]
max-line-length = 88
ignore = W291, W293
</code></pre></div></div>
<p>Then run the linter again:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run flake8 <span class="nb">.</span>
</code></pre></div></div>

<p>There should be fewer errors now. The rest will need to be corrected manually.</p>

<h4 id="id_isort">iSort</h4>
<p>Finally, to enforce consistency in the import statements used in a file, some teams use an import sorter. Will will use <code class="highlighter-rouge">isort</code> to do this. Let’s install it…</p>

<p><strong>Install isort:</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry add isort
</code></pre></div></div>

<p>Once you have installed it, you should see <code class="highlighter-rouge">isort</code> listed as a  dependency in your <code class="highlighter-rouge">pyproject.toml</code> file.</p>

<p><strong>Run isort check:</strong></p>

<p>You are now ready to run the import sorter:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run isort <span class="nb">.</span>
</code></pre></div></div>

<p>Take a look and make a note of the files that were modified by this command. Then, open one of these files, change the import order (at the top), and then run the <code class="highlighter-rouge">isort</code> command again. You should see that the order has been corrected / alphabetized. Now run the tests one final time to make sure they still work:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>poetry run python run_tests_framework.py <span class="nt">--verbose</span>
</code></pre></div></div>

<p>You are now done with the Python version of this lab! If you want 6 points extra credit, you can also do the JavaScript version of this lab.</p>

<h2 id="takeaways">Takeaways</h2>
<p>A project’s <strong>test suite</strong>, <strong>code formatter</strong>, <strong>linter</strong>, and <strong>import sorter</strong> (if applicable) are typically run before any pull request is made. These tools are also run by your project’s continuous integration code validation suite before any branch is merged into the main codebase. Test suites and automated static analysis tools are an important part of creating scalable software that is maintainable over time.</p>

<h2 id="id_what-to-submit">What to Submit</h2>
<p>When you’re done, push your <code class="highlighter-rouge">lab06</code> branch to GitHub and make a pull request. Please ensure that the destination (left-hand side) is pointing to the <code class="highlighter-rouge">main</code> branch of <strong>your repo</strong> and the source (right-hand side) is pointing to the <code class="highlighter-rouge">lab06</code> branch of <strong>your repo</strong>. Then, please paste a link to your PR in the Moodle.</p>



            </article>  
        </main>
        <footer>
            <p>    
                Department of Computer Science, UNC Asheville
            </p>
        </footer>
        
        <script type="text/javascript" src="/spring2025/assets/js/main.js"></script>

<!-- <script>
    //little bit of a hack:
    const scrollLeft = () => {
        //console.log('scrollLeft');
        document.documentElement.scrollLeft = 0;
    };
    setTimeout(scrollLeft, 100);
</script> -->
        
        <script>
            window.h_max = "5";
        </script>
        
        <script type="text/javascript" src="/spring2025/assets/js/scrollspy.js"></script>
        <script type="text/javascript" src="/spring2025/assets/js/expandable.js"></script>
    </body>
</html>